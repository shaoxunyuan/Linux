<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Linux基础及应用教程：进程管理</title>

  <!-- Markdown 样式 -->
  <link rel="stylesheet" href="docs/markdown-style.css">

  <!-- Prism 代码高亮 -->
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css" rel="stylesheet">

  <!-- 图标库 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">

  <style>
    .sidebar-nav {
      position: fixed;
      left: 0;
      top: 0;
      width: 220px;
      height: 100vh;
      background-color: #f5f5f5;
      border-right: 1px solid #ddd;
      padding: 20px 0;
      overflow-y: auto;
      box-sizing: border-box;
      z-index: 999;
    }

    .nav-title {
      font-size: 18px;
      font-weight: bold;
      padding: 0 20px 15px;
      border-bottom: 1px solid #ddd;
      margin-bottom: 15px;
      color: #333;
    }

    .nav-list { list-style: none; padding: 0; margin: 0; }
    .nav-list li a {
      display: block;
      padding: 8px 25px;
      color: #333;
      text-decoration: none;
      font-size: 14px;
      transition: background-color 0.2s;
    }
    .nav-list li a:hover { background-color: #e0e0e0; }

    .sub-nav { list-style: none; padding-left: 15px; background-color: #fafafa; }
    .sub-nav li a { padding-left: 35px; font-size: 13px; color: #666; }

    .markdown-body {
      margin-left: 240px;
      padding: 20px 40px;
      max-width: 1200px;
      box-sizing: border-box;
    }

    .code-block { position: relative; margin: 15px 0; }

    .copy-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: rgba(255,255,255,0.9);
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 4px 8px;
      cursor: pointer;
      font-size: 14px;
      color: #666;
      transition: all 0.2s;
      z-index: 10;
    }

    .copy-btn:hover { background-color: #fff; color: #333; border-color: #bbb; }
    .copy-btn.success { background-color: #4CAF50; color: white; border-color: #4CAF50; }
    .copy-btn.success i::after { content: " 已复制"; font-family: sans-serif; }

    .back-home-fixed {
      position: fixed;
      bottom: 25px;
      right: 25px;
      background-color: #3498db;
      color: #fff;
      padding: 10px 18px;
      border-radius: 6px;
      text-decoration: none;
      font-size: 14px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.25);
      transition: background-color 0.25s;
      z-index: 9999;
    }
    .back-home-fixed:hover { background-color: #217dbb; }

    @media (max-width: 768px) {
      .sidebar-nav { display: none; }
      .markdown-body { margin-left: 0; padding: 20px; }
    }
  </style>
</head>
<body>

  <!-- 左侧导航 -->
  <nav class="sidebar-nav">
    <div class="nav-title">实验目录</div>
    <ul class="nav-list">
      <li><a href="#实验标题">实验标题</a></li>
      <li><a href="#一、实验目标">一、实验目标</a></li>
      <li><a href="#二、实验环境">二、实验环境</a></li>
      <li>
        <a href="#三、实验内容与步骤">三、实验内容与步骤</a>
        <ul class="sub-nav">
          <li><a href="#实验准备">实验准备</a></li>
          <li><a href="#任务1-查看进程ps">任务1：查看进程 ps</a></li>
          <li><a href="#任务2-实时监控top">任务2：实时监控 top</a></li>
          <li><a href="#任务3-进程树pstree">任务3：进程树 pstree</a></li>
          <li><a href="#任务4查找进程pgrep">任务4：查找进程 pgrep</a></li>
          <li><a href="#任务5终止进程kill-pkill">任务5：终止进程 kill / pkill</a></li>
          <li><a href="#任务6优先级管理nice-renice">任务6：优先级管理 nice / renice</a></li>
          <li><a href="#任务7后台任务jobsfgbg">任务7：后台任务 jobs / fg / bg</a></li>
          <li><a href="#综合实操练习">综合实操练习</a></li>
        </ul>
      </li>
      <li><a href="#四、实验报告要求">四、实验报告要求</a></li>
      <li><a href="#五、常见问题解答">五、常见问题解答</a></li>
    </ul>
  </nav>

  <!-- 主体内容 -->
  <article class="markdown-body">

    <h1 id="实验标题">Linux基础及应用教程：进程管理</h1>
    <p>Linux 进程管理是运维、开发、管理系统资源的核心技能。本节介绍 <code>ps</code>、<code>top</code>、<code>pstree</code>、<code>pgrep</code>、<code>kill</code>、<code>nice</code>、<code>jobs</code> 等核心命令。</p>

    <h2 id="一、实验目标">一、实验目标</h2>
    <ul>
      <li>掌握 ps、top 查看进程信息</li>
      <li>理解进程树与父子关系</li>
      <li>学会查找、终止进程</li>
      <li>掌握优先级管理 nice / renice</li>
      <li>理解后台任务 jobs / fg / bg</li>
    </ul>

    <h2 id="二、实验环境">二、实验环境</h2>
    <ul>
      <li>CentOS 7 / 8</li>
      <li>普通用户：<code>njucm</code></li>
      <li>root 密码：<code>123456</code></li>
    </ul>

    <h2 id="三、实验内容与步骤">三、实验内容与步骤</h2>

    <h3 id="实验准备">实验准备</h3>
    <p>准备一些可用于演示的后台任务：</p>

    <div class="code-block">
      <button class="copy-btn"><i class="fa fa-clipboard"></i></button>
      <pre><code class="language-bash">sleep 300 &
sleep 500 &</code></pre>
    </div>

    <!-- ps -->
    <h3 id="任务1-查看进程ps">任务1：查看进程 ps</h3>

    <div class="code-block">
      <button class="copy-btn"><i class="fa fa-clipboard"></i></button>
      <pre><code class="language-bash">ps
ps -aux
ps -ef

# 查看某个进程
ps -ef | grep sleep</code></pre>
    </div>

    <!-- top -->
    <h3 id="任务2-实时监控top">任务2：实时监控 top</h3>

    <div class="code-block">
      <button class="copy-btn"><i class="fa fa-clipboard"></i></button>
      <pre><code class="language-bash">top</code></pre>
    </div>

    <!-- pstree -->
    <h3 id="任务3-进程树pstree">任务3：进程树 pstree</h3>

    <div class="code-block">
      <button class="copy-btn"><i class="fa fa-clipboard"></i></button>
      <pre><code class="language-bash">pstree
pstree -p        # 显示 PID
pstree root      # 查看 root 进程树</code></pre>
    </div>

    <!-- pgrep -->
    <h3 id="任务4查找进程pgrep">任务4：查找进程 pgrep</h3>

    <div class="code-block">
      <button class="copy-btn"><i class="fa fa-clipboard"></i></button>
      <pre><code class="language-bash">pgrep sleep
pgrep -l ssh     # 显示名称</code></pre>
    </div>

    <!-- kill -->
    <h3 id="任务5终止进程kill-pkill">任务5：终止进程 kill / pkill</h3>

    <div class="code-block">
      <button class="copy-btn"><i class="fa fa-clipboard"></i></button>
      <pre><code class="language-bash"># 使用 PID 杀死
kill 12345

# 强制杀死
kill -9 12345

# 按名称杀死
pkill sleep</code></pre>
    </div>

    <!-- nice / renice -->
    <h3 id="任务6优先级管理nice-renice">任务6：优先级管理 nice / renice</h3>

    <div class="code-block">
      <button class="copy-btn"><i class="fa fa-clipboard"></i></button>
      <pre><code class="language-bash"># 以较低优先级运行程序
nice -n 10 sleep 300 &

# 修改正在运行进程的优先级
renice -n 5 -p 12345</code></pre>
    </div>

    <!-- jobs -->
    <h3 id="任务7后台任务jobsfgbg">任务7：后台任务 jobs / fg / bg</h3>

    <div class="code-block">
      <button class="copy-btn"><i class="fa fa-clipboard"></i></button>
      <pre><code class="language-bash"># 查看后台任务
jobs

# 暂停任务
Ctrl + Z

# 后台继续
bg

# 前台继续
fg</code></pre>
    </div>

    <!-- 综合 -->
    <h3 id="综合实操练习">综合实操练习</h3>
    <p>任务：找到所有占用 CPU 前五的进程，并结束其中为 sleep 的进程。</p>

    <div class="code-block">
      <button class="copy-btn"><i class="fa fa-clipboard"></i></button>
      <pre><code class="language-bash">top -b -n 1 | head -n 15   # 查看前五

pgrep sleep | xargs kill</code></pre>
    </div>

    <h2 id="四、实验报告要求">四、实验报告要求</h2>
    <ul>
      <li>截图记录每个命令执行结果</li>
      <li>总结 ps、top、pstree、kill、nice 常用参数</li>
      <li>写出不少于 3 个 pgrep + kill 的组合示例</li>
      <li>描述后台任务管理流程</li>
    </ul>

    <h2 id="五、常见问题解答">五、常见问题解答</h2>
    <ul>
      <li><strong>Q：kill 和 kill -9 有什么区别？</strong><br>
      A：kill 是温和终止，kill -9 是强制终止。</li>

      <li><strong>Q：nice 数值越大优先级越高吗？</strong><br>
      A：不是，越大优先级越低。</li>

      <li><strong>Q：ps 和 top 有什么区别？</strong><br>
      A：ps 是静态快照，top 是实时更新。</li>

      <li><strong>Q：fg、bg 和 jobs 的关系？</strong><br>
      A：jobs 查看后台任务；bg 后台运行；fg 前台运行。</li>
    </ul>

  </article>

  <!-- 右下角返回 -->
  <a href="https://shaoxunyuan.github.io/Linux" class="back-home-fixed">回到主页</a>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
  <script>
    document.querySelectorAll('.copy-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const code = this.nextElementSibling.querySelector('code').textContent;
        navigator.clipboard.writeText(code).then(() => {
          this.classList.add('success');
          setTimeout(() => { this.classList.remove('success'); }, 2000);
        });
      });
    });

    document.querySelectorAll('.sidebar-nav a').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          window.scrollTo({ top: target.offsetTop - 20, behavior: 'smooth' });
        }
      });
    });
  </script>

</body>
</html>
